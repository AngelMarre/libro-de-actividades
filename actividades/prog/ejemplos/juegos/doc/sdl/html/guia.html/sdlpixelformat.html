<HTML
><HEAD
><TITLE
>SDL_PixelFormat</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.49"><LINK
REL="HOME"
TITLE="SDL Library Documentation"
HREF="book1.html" tppabs="http://sdl.euskal-linux.org/guia/book1.html"><LINK
REL="UP"
TITLE="Video"
HREF="video.html" tppabs="http://sdl.euskal-linux.org/guia/video.html"><LINK
REL="PREVIOUS"
TITLE="SDL_Palette"
HREF="sdlpalette.html" tppabs="http://sdl.euskal-linux.org/guia/sdlpalette.html"><LINK
REL="NEXT"
TITLE="SDL_Surface"
HREF="sdlsurface.html" tppabs="http://sdl.euskal-linux.org/guia/sdlsurface.html"> <link rel="STYLESHEET" type="text/css" href="../styles.css" tppabs="http://sdl.euskal-linux.org/styles.css">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="description" content="Euskal Linux ORG">
<meta name="keywords" content="Linux,Linux Gazette,issue,articulos,sistemas operativos,php,pocketpc,administración,redes,bases de datos,GNU,RedHat,Debian,FDL,OpenContent,penguin,Free Software,FSF,Postgresql,ext2,reiserfs,Linus Torvalds,Alan Cox,KDE,GNOME,WindowMaker,AfterStep,Enlightment,BlackBox,Sawfish,Samba,Lyx,Tux">
<meta name="language" content="Spanish">
<meta name="copyright" content="Euskal Linux ORG">
<meta name="robots" content="ALL">
<meta name="reply-to" content="webmaster@euskal-linux.org">
<meta http-equiv="Content-Language" content="ES-ES">
<link rel="icon" href="../../error.euskal-linux.org/pagina_no_encontrada.html" tppabs="http://sdl.euskal-linux.org/guia/favicon.ico">
 </HEAD
><BODY
CLASS="REFENTRY"
><table cellspacing="0" cellpadding="0" width="100%" border="0">
  <tr bgcolor="#E7E7E7">
    <td colspan=2><img src="../graficos/pixel.png" tppabs="http://sdl.euskal-linux.org/graficos/pixel.png" width="1" height="1" alt=""></td>
  </tr>

  <tr valign="middle" bgcolor="#C0C0C0">
    <td>
      <font color=#000000>
      &nbsp;&middot;&nbsp;<a class="osdn" href="javascript:if(confirm('http://www.euskal-linux.org/home.htm  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.euskal-linux.org/home.htm'" tppabs="http://www.euskal-linux.org/home.htm" target="_top">Euskal Linux ORG</a>
      &nbsp;&middot;&nbsp;<a class="osdn" href="javascript:if(confirm('http://www.hegali.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.hegali.org/'" tppabs="http://www.hegali.org/" target="_top">Hegali ORG</a>
      &nbsp;&middot;&nbsp;<a class="osdn" href="javascript:if(confirm('http://gazette.euskal-linux.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://gazette.euskal-linux.org/'" tppabs="http://gazette.euskal-linux.org/" target="_top">Linux Gazette</a>
      &nbsp;&middot;&nbsp;<a class="osdn" href="javascript:if(confirm('http://www.euskal-gnu.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.euskal-gnu.org/'" tppabs="http://www.euskal-gnu.org/">Euskara</a>
      &nbsp;&middot;&nbsp;
      </font>
    </td>

    <td align="right">
      <font color=#000000>
      &nbsp;&middot;&nbsp;
      <a class="osdn" href="javascript:if(confirm('http://sdl.euskal-linux.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/'" tppabs="http://sdl.euskal-linux.org/">HOME</a>&nbsp;&middot;&nbsp;
      </font>
    </td>
  </tr>

  <tr valign="middle" bgcolor="#6F6F6F">
    <td colspan=2><img src="../graficos/pixel.png" tppabs="http://sdl.euskal-linux.org/graficos/pixel.png" width="1" height="1" alt=""></td>
  </tr>
  <tr bgcolor="#E7E7E7">
    <td colspan=2><img src="../graficos/pixel.png" tppabs="http://sdl.euskal-linux.org/graficos/pixel.png" width="1" height="1" alt=""></td>
  </tr>
</table>
<BR><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>SDL Library Documentation</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="sdlpalette.html" tppabs="http://sdl.euskal-linux.org/guia/sdlpalette.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="sdlsurface.html" tppabs="http://sdl.euskal-linux.org/guia/sdlsurface.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="SDLPIXELFORMAT"
>SDL_PixelFormat</A
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN2537"
></A
><H2
>Name</H2
>SDL_PixelFormat&nbsp;--&nbsp;Stores surface format information</DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN2540"
></A
><H2
>Structure Definition</H2
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>typedef struct{
  SDL_Palette *palette;
  Uint8  BitsPerPixel;
  Uint8  BytesPerPixel;
  Uint32 Rmask, Gmask, Bmask, Amask;
  Uint8  Rshift, Gshift, Bshift, Ashift;
  Uint8  Rloss, Gloss, Bloss, Aloss;
  Uint32 colorkey;
  Uint8  alpha;
} SDL_PixelFormat;</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN2543"
></A
><H2
>Structure Data</H2
><DIV
CLASS="INFORMALTABLE"
><P
></P
><TABLE
BORDER="0"
CLASS="CALSTABLE"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="STRUCTFIELD"
><I
>palette</I
></TT
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Pointer to the <A
HREF="sdlpalette.html" tppabs="http://sdl.euskal-linux.org/guia/sdlpalette.html"
>palette</A
>, or <TT
CLASS="LITERAL"
>NULL</TT
> if the <TT
CLASS="STRUCTFIELD"
><I
>BitsPerPixel</I
></TT
>&#62;8</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="STRUCTFIELD"
><I
>BitsPerPixel</I
></TT
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>The number of bits used to represent each pixel in a surface. Usually 8, 16, 24 or 32.</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="STRUCTFIELD"
><I
>BytesPerPixel</I
></TT
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>The number of bytes used to represent each pixel in a surface. Usually one to four.</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="STRUCTFIELD"
><I
>[RGBA]mask</I
></TT
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Binary mask used to retrieve individual color values</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="STRUCTFIELD"
><I
>[RGBA]loss</I
></TT
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Precision loss of each color component (2<SUP
>[RGBA]loss</SUP
>)</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="STRUCTFIELD"
><I
>[RGBA]shift</I
></TT
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Binary left shift of each color component in the pixel value</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="STRUCTFIELD"
><I
>colorkey</I
></TT
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Pixel value of transparent pixels</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="STRUCTFIELD"
><I
>alpha</I
></TT
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Overall surface alpha value</TD
></TR
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN2584"
></A
><H2
>Descripción</H2
><P
>A <SPAN
CLASS="STRUCTNAME"
>SDL_PixelFormat</SPAN
> describes the format of the pixel data stored at the <TT
CLASS="STRUCTFIELD"
><I
>pixels</I
></TT
> field of a <A
HREF="sdlsurface.html" tppabs="http://sdl.euskal-linux.org/guia/sdlsurface.html"
><SPAN
CLASS="STRUCTNAME"
>SDL_Surface</SPAN
></A
>. Every surface stores a <SPAN
CLASS="STRUCTNAME"
>SDL_PixelFormat</SPAN
> in the <TT
CLASS="STRUCTFIELD"
><I
>format</I
></TT
> field.</P
><P
>If you wish to do pixel level modifications on a surface, then understanding how SDL stores its color information is essential.</P
><P
>8-bit pixel formats are the easiest to understand. Since its an 8-bit format, we have 8 <TT
CLASS="STRUCTFIELD"
><I
>BitsPerPixel</I
></TT
> and 1 <TT
CLASS="STRUCTFIELD"
><I
>BytesPerPixel</I
></TT
>. Since <TT
CLASS="STRUCTFIELD"
><I
>BytesPerPixel</I
></TT
> is 1, all pixels are represented by a Uint8 which contains an index into <TT
CLASS="STRUCTFIELD"
><I
>palette</I
></TT
>-&#62;<TT
CLASS="STRUCTFIELD"
><I
>colors</I
></TT
>. So, to determine the color of a pixel in a 8-bit surface: we read the color index from <SPAN
CLASS="STRUCTNAME"
>surface</SPAN
>-&#62;<TT
CLASS="STRUCTFIELD"
><I
>pixels</I
></TT
> and we use that index to read the <A
HREF="sdlcolor.html" tppabs="http://sdl.euskal-linux.org/guia/sdlcolor.html"
><SPAN
CLASS="STRUCTNAME"
>SDL_Color</SPAN
></A
> structure from <SPAN
CLASS="STRUCTNAME"
>surface</SPAN
>-&#62;<TT
CLASS="STRUCTFIELD"
><I
>format</I
></TT
>-&#62;<TT
CLASS="STRUCTFIELD"
><I
>palette</I
></TT
>-&#62;<TT
CLASS="STRUCTFIELD"
><I
>colors</I
></TT
>. Like so:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>SDL_Surface *surface;
SDL_PixelFormat *fmt;
SDL_Color *color;
Uint8 index;

.
.

/* Create surface */
.
.
fmt=surface-&#62;format;

/* Check the bitdepth of the surface */
if(fmt-&#62;BitsPerPixel!=8){
  fprintf(stderr, "Not an 8-bit surface.\n");
  return(-1);
}

/* Lock the surface */
SDL_LockSurface(surface);

/* Get the topleft pixel */
index=(Uint8 *)surface-&#62;pixels;
color=fmt-&#62;palette-&#62;colors[index];

/* Unlock the surface */
SDL_UnlockSurface(surface);
printf("Pixel Color-&#62; Red: %d, Green: %d, Blue: %d. Index: %d\n",
          color-&#62;r, color-&#62;g, color-&#62;b, index);
.
.</PRE
></TD
></TR
></TABLE
></P
><P
>Pixel formats above 8-bit are an entirely different experience. They are considered to be "TrueColor" formats and the color information is stored in the pixels themselves, not in a palette (packed-pixel). The mask, shift and loss fields tell us how the color information is encoded. The mask fields allow us to isolate each color component, the shift fields tell us how far left we have to shift the masked value and the loss fields tell us for far right we have to shift the final value to convert it to a full 8-bit color component.
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>/* Extracting color components from a 32-bit color value */
SDL_PixelFormat *fmt;
SDL_Surface *surface;
Uint32 temp, pixel;
Uint8 red, green, blue, alpha;
.
.
.
fmt=surface-&#62;format;
SDL_LockSurface(surface);
pixel=(Uint32*)surface-&#62;pixels;
SDL_UnlockSurface(surface);

/* Get Red component */
temp=pixel&#38;fmt-&#62;Rmask; /* Isolate red component */
temp=temp&#62;&#62;fmt-&#62;Rshift;/* Shift it down to 8-bit */
temp=temp&#60;&#60;fmt-&#62;Rloss; /* Expand to a full 8-bit number */
red=(Uint8)temp;

/* Get Green component */
temp=pixel&#38;fmt-&#62;Gmask; /* Isolate green component */
temp=temp&#62;&#62;fmt-&#62;Gshift;/* Shift it down to 8-bit */
temp=temp&#60;&#60;fmt-&#62;Gloss; /* Expand to a full 8-bit number */
green=(Uint8)temp;

/* Get Blue component */
temp=pixel&#38;fmt-&#62;Bmask; /* Isolate blue component */
temp=temp&#62;&#62;fmt-&#62;Bshift;/* Shift it down to 8-bit */
temp=temp&#60;&#60;fmt-&#62;Bloss; /* Expand to a full 8-bit number */
blue=(Uint8)temp;

/* Get Alpha component */
temp=pixel&#38;fmt-&#62;Amask; /* Isolate alpha component */
temp=temp&#62;&#62;fmt-&#62;Ashift;/* Shift it down to 8-bit */
temp=temp&#60;&#60;fmt-&#62;Aloss; /* Expand to a full 8-bit number */
alpha=(Uint8)temp;

printf("Pixel Color -&#62; R: %d,  G: %d,  B: %d,  A: %d\n", red, green, blue, alpha);
.
.
.</PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN2611"
></A
><H2
>Ver también</H2
><P
><A
HREF="sdlsurface.html" tppabs="http://sdl.euskal-linux.org/guia/sdlsurface.html"
><SPAN
CLASS="STRUCTNAME"
>SDL_Surface</SPAN
></A
>,
<A
HREF="sdlmaprgb.html" tppabs="http://sdl.euskal-linux.org/guia/sdlmaprgb.html"
><TT
CLASS="FUNCTION"
>SDL_MapRGB</TT
></A
></P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="sdlpalette.html" tppabs="http://sdl.euskal-linux.org/guia/sdlpalette.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html" tppabs="http://sdl.euskal-linux.org/guia/book1.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="sdlsurface.html" tppabs="http://sdl.euskal-linux.org/guia/sdlsurface.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>SDL_Palette</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="video.html" tppabs="http://sdl.euskal-linux.org/guia/video.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>SDL_Surface</TD
></TR
></TABLE
></DIV
>
<CENTER>
<HR>
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.hegali.org/euro/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.hegali.org/euro/'" tppabs="http://sdl.euskal-linux.org/banner/www.hegali.org/euro/"><IMG SRC="../graficos/euro.png" tppabs="http://sdl.euskal-linux.org/graficos/euro.png" BORDER="0" ALT="Euro Calculadora"></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.debian.org  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.debian.org'" tppabs="http://sdl.euskal-linux.org/banner/www.debian.org"><IMG SRC="../graficos/powerdebian.png" tppabs="http://sdl.euskal-linux.org/graficos/powerdebian.png" BORDER="0" ALT="Powered by Debian"></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.hegali.org  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.hegali.org'" tppabs="http://sdl.euskal-linux.org/banner/www.hegali.org"><IMG SRC="../graficos/banner_hegali.png" tppabs="http://sdl.euskal-linux.org/graficos/banner_hegali.png" BORDER="0" ALT="Hegali ORG"></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.tallerdice.com  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.tallerdice.com'" tppabs="http://sdl.euskal-linux.org/banner/www.tallerdice.com"><IMG SRC="../graficos/banner_dice.png" tppabs="http://sdl.euskal-linux.org/graficos/banner_dice.png" BORDER="0" ALT="Taller D.I.C.E."></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.euskal-linux.org  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.euskal-linux.org'" tppabs="http://sdl.euskal-linux.org/banner/www.euskal-linux.org"><IMG SRC="../graficos/banner_el.png" tppabs="http://sdl.euskal-linux.org/graficos/banner_el.png" BORDER="0" ALT="Euskal Linux ORG"></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.apache.org  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.apache.org'" tppabs="http://sdl.euskal-linux.org/banner/www.apache.org"><IMG SRC="../graficos/apache.png" tppabs="http://sdl.euskal-linux.org/graficos/apache.png" BORDER="0" ALT="Powered by Apache"></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/libros.euskal-linux.org  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/libros.euskal-linux.org'" tppabs="http://sdl.euskal-linux.org/banner/libros.euskal-linux.org"><IMG SRC="../graficos/banner_libro.png" tppabs="http://sdl.euskal-linux.org/graficos/banner_libro.png" BORDER="0" ALT="Base de Datos de libros"></A> &nbsp; &nbsp;
<HR><BR>
&copy 1995, 2002 &nbsp; Euskal Linux ORG<BR>
&copy 2000, 2002 &nbsp; Hegali ORG &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <BR><BR>
</CENTER>

 </BODY
></HTML
>