<HTML
><HEAD
><TITLE
>SDL_OpenAudio</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.49"><LINK
REL="HOME"
TITLE="SDL Library Documentation"
HREF="book1.html" tppabs="http://sdl.euskal-linux.org/guia/book1.html"><LINK
REL="UP"
TITLE="Audio"
HREF="audio.html" tppabs="http://sdl.euskal-linux.org/guia/audio.html"><LINK
REL="PREVIOUS"
TITLE="SDL_AudioSpec"
HREF="sdlaudiospec.html" tppabs="http://sdl.euskal-linux.org/guia/sdlaudiospec.html"><LINK
REL="NEXT"
TITLE="SDL_PauseAudio"
HREF="sdlpauseaudio.html" tppabs="http://sdl.euskal-linux.org/guia/sdlpauseaudio.html"> <link rel="STYLESHEET" type="text/css" href="../styles.css" tppabs="http://sdl.euskal-linux.org/styles.css">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="description" content="Euskal Linux ORG">
<meta name="keywords" content="Linux,Linux Gazette,issue,articulos,sistemas operativos,php,pocketpc,administración,redes,bases de datos,GNU,RedHat,Debian,FDL,OpenContent,penguin,Free Software,FSF,Postgresql,ext2,reiserfs,Linus Torvalds,Alan Cox,KDE,GNOME,WindowMaker,AfterStep,Enlightment,BlackBox,Sawfish,Samba,Lyx,Tux">
<meta name="language" content="Spanish">
<meta name="copyright" content="Euskal Linux ORG">
<meta name="robots" content="ALL">
<meta name="reply-to" content="webmaster@euskal-linux.org">
<meta http-equiv="Content-Language" content="ES-ES">
<link rel="icon" href="../../error.euskal-linux.org/pagina_no_encontrada.html" tppabs="http://sdl.euskal-linux.org/guia/favicon.ico">
 </HEAD
><BODY
CLASS="REFENTRY"
><table cellspacing="0" cellpadding="0" width="100%" border="0">
  <tr bgcolor="#E7E7E7">
    <td colspan=2><img src="../graficos/pixel.png" tppabs="http://sdl.euskal-linux.org/graficos/pixel.png" width="1" height="1" alt=""></td>
  </tr>

  <tr valign="middle" bgcolor="#C0C0C0">
    <td>
      <font color=#000000>
      &nbsp;&middot;&nbsp;<a class="osdn" href="javascript:if(confirm('http://www.euskal-linux.org/home.htm  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.euskal-linux.org/home.htm'" tppabs="http://www.euskal-linux.org/home.htm" target="_top">Euskal Linux ORG</a>
      &nbsp;&middot;&nbsp;<a class="osdn" href="javascript:if(confirm('http://www.hegali.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.hegali.org/'" tppabs="http://www.hegali.org/" target="_top">Hegali ORG</a>
      &nbsp;&middot;&nbsp;<a class="osdn" href="javascript:if(confirm('http://gazette.euskal-linux.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://gazette.euskal-linux.org/'" tppabs="http://gazette.euskal-linux.org/" target="_top">Linux Gazette</a>
      &nbsp;&middot;&nbsp;<a class="osdn" href="javascript:if(confirm('http://www.euskal-gnu.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.euskal-gnu.org/'" tppabs="http://www.euskal-gnu.org/">Euskara</a>
      &nbsp;&middot;&nbsp;
      </font>
    </td>

    <td align="right">
      <font color=#000000>
      &nbsp;&middot;&nbsp;
      <a class="osdn" href="javascript:if(confirm('http://sdl.euskal-linux.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/'" tppabs="http://sdl.euskal-linux.org/">HOME</a>&nbsp;&middot;&nbsp;
      </font>
    </td>
  </tr>

  <tr valign="middle" bgcolor="#6F6F6F">
    <td colspan=2><img src="../graficos/pixel.png" tppabs="http://sdl.euskal-linux.org/graficos/pixel.png" width="1" height="1" alt=""></td>
  </tr>
  <tr bgcolor="#E7E7E7">
    <td colspan=2><img src="../graficos/pixel.png" tppabs="http://sdl.euskal-linux.org/graficos/pixel.png" width="1" height="1" alt=""></td>
  </tr>
</table>
<BR><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>SDL Library Documentation</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="sdlaudiospec.html" tppabs="http://sdl.euskal-linux.org/guia/sdlaudiospec.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="sdlpauseaudio.html" tppabs="http://sdl.euskal-linux.org/guia/sdlpauseaudio.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="SDLOPENAUDIO"
>SDL_OpenAudio</A
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN5985"
></A
><H2
>Name</H2
>SDL_OpenAudio&nbsp;--&nbsp;Abre el dispositivo de audio con los parámetros deseados.</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN5988"
></A
><H2
>Synopsis</H2
><DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="FUNCSYNOPSISINFO"
>#include "SDL.h"</PRE
></TD
></TR
></TABLE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>int SDL_OpenAudio</CODE
>(SDL_AudioSpec *desired, SDL_AudioSpec *obtained);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN5995"
></A
><H2
>Descripción</H2
><P
>Esta función abre el dispositivo de audio con los parámetros deseados (<TT
CLASS="PARAMETER"
><I
>desired</I
></TT
>), si ha
tenido exito devuelve 0, colocando los parametros hardware
actuales en la estructura apuntada por <TT
CLASS="PARAMETER"
><I
>obtained</I
></TT
>. Si
<TT
CLASS="PARAMETER"
><I
>obtained</I
></TT
> es NULL, los datos de audio
pasados a la función retrollamada (callback) estarán garantizados en el formato pedido, y
automaticamente serán convertidos al formato de audio del hardware si es
necesario.
Esta función devuelve -1 si falla al abrir el dispositivo de
audio, o no se pudo inicializar la hebra (thread) de audio.</P
><P
>PAra abrir el dispositivo de audio de debe crear una estructura <A
HREF="sdlaudiospec.html" tppabs="http://sdl.euskal-linux.org/guia/sdlaudiospec.html"
><SPAN
CLASS="STRUCTNAME"
>SDL_AudioSpec</SPAN
></A
> deseada (<TT
CLASS="PARAMETER"
><I
>desired</I
></TT
>).
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>SDL_AudioSpec *desired;
.
.
desired=(SDL_AudioSpec *)malloc(sizeof(SDL_AudioSpec));</PRE
></TD
></TR
></TABLE
>
Debes rellenar esta estructura con las especificaciones deseadas de audio.</P
><P
></P
><DL
><DT
><SPAN
CLASS="STRUCTNAME"
>desired</SPAN
>-&#62;<TT
CLASS="STRUCTFIELD"
><I
>freq</I
></TT
></DT
><DD
><P
>La frecuencia de audio deseada en samples-por-segundo.</P
></DD
><DT
><SPAN
CLASS="STRUCTNAME"
>desired</SPAN
>-&#62;<TT
CLASS="STRUCTFIELD"
><I
>format</I
></TT
></DT
><DD
><P
>The desired audio format (see <A
HREF="sdlaudiospec.html" tppabs="http://sdl.euskal-linux.org/guia/sdlaudiospec.html"
><SPAN
CLASS="STRUCTNAME"
>SDL_AudioSpec</SPAN
></A
>)</P
></DD
><DT
><SPAN
CLASS="STRUCTNAME"
>desired</SPAN
>-&#62;<TT
CLASS="STRUCTFIELD"
><I
>samples</I
></TT
></DT
><DD
><P
>The desired size of the audio buffer in samples. This number should be a power of two, and may be adjusted by the audio driver to a value more suitable for the hardware.  Good values seem to range between 512 and 8192 inclusive, depending on the application and CPU speed.  Smaller values yield faster response time, but can lead to underflow if the application is doing heavy processing and cannot fill the audio buffer in time.  A stereo sample consists of both right and left channels in LR ordering.  Note that the number of samples is directly related to time by the following formula:  ms = (samples*1000)/freq</P
></DD
><DT
><SPAN
CLASS="STRUCTNAME"
>desired</SPAN
>-&#62;<TT
CLASS="STRUCTFIELD"
><I
>callback</I
></TT
></DT
><DD
><P
>This should be set to a function that will be called when the audio device is ready for more data.  It is passed a pointer to the audio buffer, and the length in bytes of the audio buffer. This function usually runs in a separate thread, and so you should protect data structures that it accesses by calling <A
HREF="sdllockaudio.html" tppabs="http://sdl.euskal-linux.org/guia/sdllockaudio.html"
><TT
CLASS="FUNCTION"
>SDL_LockAudio</TT
></A
> and <A
HREF="sdlunlockaudio.html" tppabs="http://sdl.euskal-linux.org/guia/sdlunlockaudio.html"
><TT
CLASS="FUNCTION"
>SDL_UnlockAudio</TT
></A
> in your code. The callback prototype is:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>void callback(void *userdata, Uint8 *stream, int len);</PRE
></TD
></TR
></TABLE
>
<TT
CLASS="PARAMETER"
><I
>userdata</I
></TT
> is the pointer stored in <TT
CLASS="STRUCTFIELD"
><I
>userdata</I
></TT
> field of the <SPAN
CLASS="STRUCTNAME"
>SDL_AudioSpec</SPAN
>. <TT
CLASS="PARAMETER"
><I
>stream</I
></TT
> is a pointer to the audio buffer you want to fill with information and <TT
CLASS="PARAMETER"
><I
>len</I
></TT
> is the length of the audio buffer in bytes.</P
></DD
><DT
><SPAN
CLASS="STRUCTNAME"
>desired</SPAN
>-&#62;<TT
CLASS="STRUCTFIELD"
><I
>userdata</I
></TT
></DT
><DD
><P
>This pointer is passed as the first parameter to the <TT
CLASS="FUNCTION"
>callback</TT
> function.</P
></DD
></DL
><P
><TT
CLASS="FUNCTION"
>SDL_OpenAudio</TT
> reads these fields from the <TT
CLASS="PARAMETER"
><I
>desired</I
></TT
> <SPAN
CLASS="STRUCTNAME"
>SDL_AudioSpec</SPAN
> structure pass to the function and attempts to find an audio configuration matching your <TT
CLASS="PARAMETER"
><I
>desired</I
></TT
>. As mentioned above, if the <TT
CLASS="PARAMETER"
><I
>obtained</I
></TT
> parameter is <TT
CLASS="LITERAL"
>NULL</TT
> then SDL with convert from your <TT
CLASS="PARAMETER"
><I
>desired</I
></TT
> audio settings to the hardware settings as it plays.</P
><P
>If <TT
CLASS="PARAMETER"
><I
>obtained</I
></TT
> is <TT
CLASS="LITERAL"
>NULL</TT
> then the <TT
CLASS="PARAMETER"
><I
>desired</I
></TT
> <SPAN
CLASS="STRUCTNAME"
>SDL_AudioSpec</SPAN
> is your working specification, otherwise the <TT
CLASS="PARAMETER"
><I
>obtained</I
></TT
> <SPAN
CLASS="STRUCTNAME"
>SDL_AudioSpec</SPAN
> becomes the working specification and the <TT
CLASS="PARAMETER"
><I
>desirec</I
></TT
> specification can be deleted. The data in the working specification is used when building <SPAN
CLASS="STRUCTNAME"
>SDL_AudioCVT</SPAN
>'s for converting loaded data to the hardware format.</P
><P
><TT
CLASS="FUNCTION"
>SDL_OpenAudio</TT
> calculates the <TT
CLASS="STRUCTFIELD"
><I
>size</I
></TT
> and <TT
CLASS="STRUCTFIELD"
><I
>silence</I
></TT
> fields for both the <TT
CLASS="PARAMETER"
><I
>desired</I
></TT
> and <TT
CLASS="PARAMETER"
><I
>obtained</I
></TT
> specifications. The <TT
CLASS="STRUCTFIELD"
><I
>size</I
></TT
> field stores the total size of the audio buffer in bytes, while the <TT
CLASS="STRUCTFIELD"
><I
>silence</I
></TT
> stores the value used to represent silence in the audio buffer</P
><P
>The audio device starts out playing <TT
CLASS="STRUCTFIELD"
><I
>silence</I
></TT
> when it's opened, and should be enabled for playing by calling <A
HREF="sdlpauseaudio.html" tppabs="http://sdl.euskal-linux.org/guia/sdlpauseaudio.html"
><TT
CLASS="FUNCTION"
>SDL_PauseAudio</TT
>(<TT
CLASS="PARAMETER"
><I
>0</I
></TT
>)</A
> when you are ready for your audio <TT
CLASS="STRUCTFIELD"
><I
>callback</I
></TT
> function to be called.  Since the audio driver may modify the requested <TT
CLASS="STRUCTFIELD"
><I
>size</I
></TT
> of the audio buffer, you should allocate any local mixing buffers after you open the audio device.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN6082"
></A
><H2
>Examples</H2
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>/* Prototype of our callback function */
void my_audio_callback(void *userdata, Uint8 *stream, int len);

/* Abrir el dispositivo de audio */
SDL_AudioSpec *desired, *obtained;
SDL_AudioSpec *hardware_spec;

/* Allocate a desired SDL_AudioSpec */
desired=(SDL_AudioSpec *)malloc(sizeof(SDL_AudioSpec));

/* Allocate space for the obtained SDL_AudioSpec */
obtained=(SDL_AudioSpec *)malloc(sizeof(SDL_AudioSpec));

/* 22050Hz - calidad FM Radio */
desired-&#62;freq=22050;

/* 16-bit signed audio */
desired-&#62;format=AUDIO_S16LSB;

/* Large audio buffer reduces risk of dropouts but increases response time */
desired-&#62;samples=8192;

/* Our callback function */
desired-&#62;callback=my_audio_callback;

desired-&#62;userdata=NULL;

/* Open the audio device */
if ( SDL_OpenAudio(desired, obtained) &#60; 0 ){
  fprintf(stderr, "Couldn't open audio: %s\n", SDL_GetError());
  exit(-1);
}
/* desired spec is no longer needed */
free(desired);
hardware_spec=obtained;
.
.
/* Prepare callback for playing */
.
.
.
/* Empieza a reproducir */
SDL_PauseAudio(0);</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN6085"
></A
><H2
>Ver también</H2
><P
><A
HREF="sdlaudiospec.html" tppabs="http://sdl.euskal-linux.org/guia/sdlaudiospec.html"
><TT
CLASS="FUNCTION"
>SDL_AudioSpec</TT
></A
>,
<A
HREF="sdllockaudio.html" tppabs="http://sdl.euskal-linux.org/guia/sdllockaudio.html"
><TT
CLASS="FUNCTION"
>SDL_LockAudio</TT
></A
>,
<A
HREF="sdlunlockaudio.html" tppabs="http://sdl.euskal-linux.org/guia/sdlunlockaudio.html"
><TT
CLASS="FUNCTION"
>SDL_UnlockAudio</TT
></A
>,
<A
HREF="sdlpauseaudio.html" tppabs="http://sdl.euskal-linux.org/guia/sdlpauseaudio.html"
><TT
CLASS="FUNCTION"
>SDL_PauseAudio</TT
></A
></P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="sdlaudiospec.html" tppabs="http://sdl.euskal-linux.org/guia/sdlaudiospec.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html" tppabs="http://sdl.euskal-linux.org/guia/book1.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="sdlpauseaudio.html" tppabs="http://sdl.euskal-linux.org/guia/sdlpauseaudio.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>SDL_AudioSpec</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="audio.html" tppabs="http://sdl.euskal-linux.org/guia/audio.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>SDL_PauseAudio</TD
></TR
></TABLE
></DIV
>
<CENTER>
<HR>
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.hegali.org/euro/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.hegali.org/euro/'" tppabs="http://sdl.euskal-linux.org/banner/www.hegali.org/euro/"><IMG SRC="../graficos/euro.png" tppabs="http://sdl.euskal-linux.org/graficos/euro.png" BORDER="0" ALT="Euro Calculadora"></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.debian.org  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.debian.org'" tppabs="http://sdl.euskal-linux.org/banner/www.debian.org"><IMG SRC="../graficos/powerdebian.png" tppabs="http://sdl.euskal-linux.org/graficos/powerdebian.png" BORDER="0" ALT="Powered by Debian"></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.hegali.org  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.hegali.org'" tppabs="http://sdl.euskal-linux.org/banner/www.hegali.org"><IMG SRC="../graficos/banner_hegali.png" tppabs="http://sdl.euskal-linux.org/graficos/banner_hegali.png" BORDER="0" ALT="Hegali ORG"></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.tallerdice.com  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.tallerdice.com'" tppabs="http://sdl.euskal-linux.org/banner/www.tallerdice.com"><IMG SRC="../graficos/banner_dice.png" tppabs="http://sdl.euskal-linux.org/graficos/banner_dice.png" BORDER="0" ALT="Taller D.I.C.E."></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.euskal-linux.org  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.euskal-linux.org'" tppabs="http://sdl.euskal-linux.org/banner/www.euskal-linux.org"><IMG SRC="../graficos/banner_el.png" tppabs="http://sdl.euskal-linux.org/graficos/banner_el.png" BORDER="0" ALT="Euskal Linux ORG"></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.apache.org  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.apache.org'" tppabs="http://sdl.euskal-linux.org/banner/www.apache.org"><IMG SRC="../graficos/apache.png" tppabs="http://sdl.euskal-linux.org/graficos/apache.png" BORDER="0" ALT="Powered by Apache"></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/libros.euskal-linux.org  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/libros.euskal-linux.org'" tppabs="http://sdl.euskal-linux.org/banner/libros.euskal-linux.org"><IMG SRC="../graficos/banner_libro.png" tppabs="http://sdl.euskal-linux.org/graficos/banner_libro.png" BORDER="0" ALT="Base de Datos de libros"></A> &nbsp; &nbsp;
<HR><BR>
&copy 1995, 2002 &nbsp; Euskal Linux ORG<BR>
&copy 2000, 2002 &nbsp; Hegali ORG &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <BR><BR>
</CENTER>

 </BODY
></HTML
>