<HTML
><HEAD
><TITLE
>Graphics and Video</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.49"><LINK
REL="HOME"
TITLE="SDL Library Documentation"
HREF="book1.html" tppabs="http://sdl.euskal-linux.org/guia/book1.html"><LINK
REL="UP"
TITLE="SDL Guide"
HREF="guide.html" tppabs="http://sdl.euskal-linux.org/guia/guide.html"><LINK
REL="PREVIOUS"
TITLE="Inicializar SDL"
HREF="x36.html" tppabs="http://sdl.euskal-linux.org/guia/x36.html"><LINK
REL="NEXT"
TITLE="Using OpenGL With SDL"
HREF="guidevideoopengl.html" tppabs="http://sdl.euskal-linux.org/guia/guidevideoopengl.html"> <link rel="STYLESHEET" type="text/css" href="../styles.css" tppabs="http://sdl.euskal-linux.org/styles.css">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="description" content="Euskal Linux ORG">
<meta name="keywords" content="Linux,Linux Gazette,issue,articulos,sistemas operativos,php,pocketpc,administración,redes,bases de datos,GNU,RedHat,Debian,FDL,OpenContent,penguin,Free Software,FSF,Postgresql,ext2,reiserfs,Linus Torvalds,Alan Cox,KDE,GNOME,WindowMaker,AfterStep,Enlightment,BlackBox,Sawfish,Samba,Lyx,Tux">
<meta name="language" content="Spanish">
<meta name="copyright" content="Euskal Linux ORG">
<meta name="robots" content="ALL">
<meta name="reply-to" content="webmaster@euskal-linux.org">
<meta http-equiv="Content-Language" content="ES-ES">
<link rel="icon" href="../../error.euskal-linux.org/pagina_no_encontrada.html" tppabs="http://sdl.euskal-linux.org/guia/favicon.ico">
 </HEAD
><BODY
CLASS="CHAPTER"
><table cellspacing="0" cellpadding="0" width="100%" border="0">
  <tr bgcolor="#E7E7E7">
    <td colspan=2><img src="../graficos/pixel.png" tppabs="http://sdl.euskal-linux.org/graficos/pixel.png" width="1" height="1" alt=""></td>
  </tr>

  <tr valign="middle" bgcolor="#C0C0C0">
    <td>
      <font color=#000000>
      &nbsp;&middot;&nbsp;<a class="osdn" href="javascript:if(confirm('http://www.euskal-linux.org/home.htm  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.euskal-linux.org/home.htm'" tppabs="http://www.euskal-linux.org/home.htm" target="_top">Euskal Linux ORG</a>
      &nbsp;&middot;&nbsp;<a class="osdn" href="javascript:if(confirm('http://www.hegali.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.hegali.org/'" tppabs="http://www.hegali.org/" target="_top">Hegali ORG</a>
      &nbsp;&middot;&nbsp;<a class="osdn" href="javascript:if(confirm('http://gazette.euskal-linux.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://gazette.euskal-linux.org/'" tppabs="http://gazette.euskal-linux.org/" target="_top">Linux Gazette</a>
      &nbsp;&middot;&nbsp;<a class="osdn" href="javascript:if(confirm('http://www.euskal-gnu.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.euskal-gnu.org/'" tppabs="http://www.euskal-gnu.org/">Euskara</a>
      &nbsp;&middot;&nbsp;
      </font>
    </td>

    <td align="right">
      <font color=#000000>
      &nbsp;&middot;&nbsp;
      <a class="osdn" href="javascript:if(confirm('http://sdl.euskal-linux.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/'" tppabs="http://sdl.euskal-linux.org/">HOME</a>&nbsp;&middot;&nbsp;
      </font>
    </td>
  </tr>

  <tr valign="middle" bgcolor="#6F6F6F">
    <td colspan=2><img src="../graficos/pixel.png" tppabs="http://sdl.euskal-linux.org/graficos/pixel.png" width="1" height="1" alt=""></td>
  </tr>
  <tr bgcolor="#E7E7E7">
    <td colspan=2><img src="../graficos/pixel.png" tppabs="http://sdl.euskal-linux.org/graficos/pixel.png" width="1" height="1" alt=""></td>
  </tr>
</table>
<BR><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>SDL Library Documentation</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x36.html" tppabs="http://sdl.euskal-linux.org/guia/x36.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="guidevideoopengl.html" tppabs="http://sdl.euskal-linux.org/guia/guidevideoopengl.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="GUIDEVIDEO"
>Chapter 2. Graphics and Video</A
></H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
><A
HREF="guidevideo.html#GUIDEVIDEOINTRO" tppabs="http://sdl.euskal-linux.org/guia/guidevideo.html#GUIDEVIDEOINTRO"
>Introduction to SDL Video</A
></DT
><DT
><A
HREF="guidevideoopengl.html" tppabs="http://sdl.euskal-linux.org/guia/guidevideoopengl.html"
>Using OpenGL With SDL</A
></DT
></DL
></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="GUIDEVIDEOINTRO"
>Introduction to SDL Video</A
></H1
><P
>Video is probably the most common thing that SDL is used for, and
so it has the most complete subsystem. Mattias has kindly written a few
examples to demonstrate the basics.</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN65"
>Initializing the Video Display</A
></H2
><P
>This is what almost all SDL programs have to do in one way or
another.</P
><DIV
CLASS="EXAMPLE"
><P
><B
>Example 2-1. Initializing the Video Display</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>    SDL_Surface *screen;

    /* Initialize the SDL library */
    if( SDL_Init(SDL_INIT_VIDEO) &#60; 0 ) {
        fprintf(stderr,
                "Couldn't initialize SDL: %s\n", SDL_GetError());
        exit(1);
    }

    /* Clean up on exit */
    atexit(SDL_Quit);
    
    /*
     * Initialize the display in a 640x480 8-bit palettized mode,
     * requesting a software surface
     */
    screen = SDL_SetVideoMode(640, 480, 8, SDL_SWSURFACE);
    if ( screen == NULL ) {
        fprintf(stderr, "Couldn't set 640x480x8 video mode: %s\n",
                        SDL_GetError());
        exit(1);
    }</PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN71"
>Initializing the Best Video Mode</A
></H2
><P
>If you have a preference for a certain pixel depth, use
SDL_SetVideoMode with SDL_ANYFORMAT as below. You can also use
SDL_VideoModeOK() to find the native video mode that is closest to the
mode you request.</P
><DIV
CLASS="EXAMPLE"
><P
><B
>Example 2-2. Initializing the Best Video Mode</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>    /* Have a preference for 8-bit, but accept any depth */
    screen = SDL_SetVideoMode(640, 480, 8, SDL_SWSURFACE|SDL_ANYFORMAT);
    if ( screen == NULL ) {
        fprintf(stderr, "Couldn't set 640x480x8 video mode: %s\n",
                        SDL_GetError());
        exit(1);
    }
    printf("Set 640x480 at %d bits-per-pixel mode\n",
           screen-&#62;format-&#62;BitsPerPixel);</PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN77"
>Loading and Displaying a BMP File</A
></H2
><P
>The following function loads and displays a BMP file given as
argument, once SDL is initialised and a video mode has been set.</P
><DIV
CLASS="EXAMPLE"
><P
><B
>Example 2-3. Loading and Displaying a BMP File</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>void display_bmp(char *file_name)
{
    SDL_Surface *image;

    /* Load the BMP file into a surface */
    image = SDL_LoadBMP(file_name);
    if (image == NULL) {
        fprintf(stderr, "Couldn't load %s: %s\n", file_name, SDL_GetError());
        return;
    }

    /*
     * Palettized screen modes will have a default palette (a standard
     * 8*8*4 colour cube), but if the image is palettized as well we can
     * use that palette for a nicer colour matching
     */
    if (image-&#62;format-&#62;palette &#38;&#38; screen-&#62;format-&#62;palette) {
    SDL_SetColors(screen, image-&#62;format-&#62;palette-&#62;colors,
              image-&#62;format-&#62;palette-&#62;ncolors);
    }

    /* Blit onto the screen surface */
    if(SDL_BlitSurface(image, NULL, screen, NULL) &#60; 0)
    fprintf(stderr, "BlitSurface error: %s\n", SDL_GetError());

    SDL_UpdateRect(screen, 0, 0, image-&#62;w, image-&#62;h);

    /* Free the allocated BMP surface */
    SDL_FreeSurface(image);
}</PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN83"
>Drawing Directly to the Display</A
></H2
><P
>The following two functions can be used to get and set single
pixels of a surface. They are carefully written to work with any depth
currently supported by SDL. Remember to lock the surface before
calling them, and to unlock it before calling any other SDL
functions.</P
><P
>To convert between pixel values and their red, green, blue
components, use SDL_GetRGB() and SDL_MapRGB().</P
><DIV
CLASS="EXAMPLE"
><P
><B
>Example 2-4. getpixel()</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>Uint32 getpixel(SDL_Surface *surface, int x, int y)
{
    int bpp = screen-&#62;format-&#62;BytesPerPixel;
    /* Here p is the address to the pixel we want to retrieve */
    Uint8 *p = (Uint8 *)surface-&#62;pixels + y * surface-&#62;pitch + x * bpp;

    switch(bpp) {
    case 1:
    return *p;

    case 2:
    return *(Uint16 *)p;

    case 3:
    if(SDL_BYTEORDER == SDL_BIG_ENDIAN)
        return p[0] &#60;&#60; 16 | p[1] &#60;&#60; 8 | p[2];
    else
        return p[0] | p[1] &#60;&#60; 8 | p[2] &#60;&#60; 16;

    case 4:
    return *(Uint32 *)p;

    default:
    return 0;       /* shouldn't happen, but avoids warnings */
    break;
    }
}</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="EXAMPLE"
><P
><B
>Example 2-5. putpixel()</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>/*
 * Set the pixel at (x, y) to the given value
 * NOTE: The surface must be locked before calling this!
 */
void putpixel(SDL_Surface *surface, int x, int y, Uint32 pixel)
{
    int bpp = screen-&#62;format-&#62;BytesPerPixel;
    /* Here p is the address to the pixel we want to set */
    Uint8 *p = (Uint8 *)surface-&#62;pixels + y * surface-&#62;pitch + x * bpp;

    switch(bpp) {
    case 1:
    *p = pixel;
    break;

    case 2:
    *(Uint16 *)p = pixel;
    break;

    case 3:
    if(SDL_BYTEORDER == SDL_BIG_ENDIAN) {
        p[0] = (pixel &#62;&#62; 16) &#38; 0xff;
        p[1] = (pixel &#62;&#62; 8) &#38; 0xff;
        p[2] = pixel &#38; 0xff;
    } else {
        p[0] = pixel &#38; 0xff;
        p[1] = (pixel &#62;&#62; 8) &#38; 0xff;
        p[2] = (pixel &#62;&#62; 16) &#38; 0xff;
    }
    break;

    case 4:
    *(Uint32 *)p = pixel;
    break;
    }
}</PRE
></TD
></TR
></TABLE
></DIV
><P
>The following code uses the putpixel() function above to set a
yellow pixel in the middle of the screen.</P
><DIV
CLASS="EXAMPLE"
><P
><B
>Example 2-6. Using putpixel()</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>&#13;    /* Code to set a yellow pixel at the center of the screen */

    int x, y;
    Uint32 yellow;

    /* Map the color yellow to this display (R=0xff, G=0xFF, B=0x00)
       Note:  If the display is palettized, you must set the palette first.
    */
    yellow = SDL_MapRGB(screen-&#62;format, 0xff, 0xff, 0x00);

    x = screen-&#62;w / 2;
    y = screen-&#62;h / 2;

    /* Lock the screen for direct access to the pixels */
    if ( SDL_MUSTLOCK(screen) ) {
        if ( SDL_LockSurface(screen) &#60; 0 ) {
        fprintf(stderr, "Can't lock screen: %s\n", SDL_GetError());
            return;
    }
    }

    putpixel(screen, x, y, yellow);

    if ( SDL_MUSTLOCK(screen) ) {
        SDL_UnlockSurface(screen);
    }
    /* Update just the part of the display that we've changed */
    SDL_UpdateRect(screen, x, y, 1, 1);

    return;&#13;</PRE
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x36.html" tppabs="http://sdl.euskal-linux.org/guia/x36.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html" tppabs="http://sdl.euskal-linux.org/guia/book1.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="guidevideoopengl.html" tppabs="http://sdl.euskal-linux.org/guia/guidevideoopengl.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Inicializar SDL</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="guide.html" tppabs="http://sdl.euskal-linux.org/guia/guide.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Using OpenGL With SDL</TD
></TR
></TABLE
></DIV
>
<CENTER>
<HR>
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.hegali.org/euro/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.hegali.org/euro/'" tppabs="http://sdl.euskal-linux.org/banner/www.hegali.org/euro/"><IMG SRC="../graficos/euro.png" tppabs="http://sdl.euskal-linux.org/graficos/euro.png" BORDER="0" ALT="Euro Calculadora"></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.debian.org  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.debian.org'" tppabs="http://sdl.euskal-linux.org/banner/www.debian.org"><IMG SRC="../graficos/powerdebian.png" tppabs="http://sdl.euskal-linux.org/graficos/powerdebian.png" BORDER="0" ALT="Powered by Debian"></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.hegali.org  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.hegali.org'" tppabs="http://sdl.euskal-linux.org/banner/www.hegali.org"><IMG SRC="../graficos/banner_hegali.png" tppabs="http://sdl.euskal-linux.org/graficos/banner_hegali.png" BORDER="0" ALT="Hegali ORG"></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.tallerdice.com  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.tallerdice.com'" tppabs="http://sdl.euskal-linux.org/banner/www.tallerdice.com"><IMG SRC="../graficos/banner_dice.png" tppabs="http://sdl.euskal-linux.org/graficos/banner_dice.png" BORDER="0" ALT="Taller D.I.C.E."></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.euskal-linux.org  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.euskal-linux.org'" tppabs="http://sdl.euskal-linux.org/banner/www.euskal-linux.org"><IMG SRC="../graficos/banner_el.png" tppabs="http://sdl.euskal-linux.org/graficos/banner_el.png" BORDER="0" ALT="Euskal Linux ORG"></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/www.apache.org  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/www.apache.org'" tppabs="http://sdl.euskal-linux.org/banner/www.apache.org"><IMG SRC="../graficos/apache.png" tppabs="http://sdl.euskal-linux.org/graficos/apache.png" BORDER="0" ALT="Powered by Apache"></A> &nbsp; &nbsp;
 <A HREF="javascript:if(confirm('http://sdl.euskal-linux.org/banner/libros.euskal-linux.org  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sdl.euskal-linux.org/banner/libros.euskal-linux.org'" tppabs="http://sdl.euskal-linux.org/banner/libros.euskal-linux.org"><IMG SRC="../graficos/banner_libro.png" tppabs="http://sdl.euskal-linux.org/graficos/banner_libro.png" BORDER="0" ALT="Base de Datos de libros"></A> &nbsp; &nbsp;
<HR><BR>
&copy 1995, 2002 &nbsp; Euskal Linux ORG<BR>
&copy 2000, 2002 &nbsp; Hegali ORG &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <BR><BR>
</CENTER>

 </BODY
></HTML
>