<html>
<head><title>Curso JSP (Java Server Pages)</title></head>
<body bgcolor=white>

<a href="../etiquetasjsp.html">Etiquetas JSP</a> |
<a href="ejemplosimple.html">Anterior</a> |
<a href="ejemplodos.html">Siguiente</a>

<h2>Ejemplo simple</h2>
<p>Ejemplo de implementación de una etiqueta personalizada simple.</p>

<h2>Manejador</h2>
<p>Fichero: <b>src/basic/Hello.java</b></p>
<p>Código fuente de la clase java que implementa un manejador de etiquetas.</p>
<blockquote><pre>
package basic;

import javax.servlet.jsp.*;
import javax.servlet.jsp.tagext.*;

public class Hello extends TagSupport
{
   public int doStartTag() throws JspException
   {
      try 
      { pageContext.getOut().print("Hello World"); } 
      catch (Exception ex) 
      { throw new JspException("IO problems"); }
      return SKIP_BODY; //El tag no tiene cuerpo
   }
	
	public int doEndTag() throws JspException 
    {	return EVAL_PAGE;	}
}
</pre></blockquote>
<p>La clase compilada se ubica en <code>/WEB-INF/classes/basic</code></p>


<h2>Descriptor de la librería</h2>
<p>Fichero: <b>/WEB-INF/tld/utilitytags.tld</b></p>
<p>Asocia la clase Java con el nombre de la etiqueta y un URI de librería.</p>
<blockquote><pre>
&lt;?xml version="1.0" encoding="ISO-8859-1" ?&gt;
&lt;!DOCTYPE taglib
   PUBLIC "-//Sun Microsystems, Inc.//DTD JSP Tag Library 1.1//EN" 
          "http://java.sun.com/j2ee/dtds/web-jsptaglib_1_1.dtd"&gt;

&lt;taglib&gt;
   &lt;tlibversion&gt;1.0&lt;/tlibversion&gt;
   &lt;jspversion&gt;1.1&lt;/jspversion&gt;
   &lt;shortname&gt;utility&lt;/shortname&gt;
   &lt;uri&gt;http://jakarta.apache.org/taglibs/utilitytags&lt;/uri&gt;
   &lt;info&gt;Librería de ejemplos&lt;/info&gt;

   &lt;!-- Hello tag --&gt;
   &lt;tag&gt;
      <b>&lt;name&gt;Hello&lt;/name&gt;</b>
      <b>&lt;tagclass&gt;basic.Hello&lt;/tagclass&gt;</b>
      &lt;bodycontent&gt;empty&lt;/bodycontent&gt;
      &lt;info&gt;Print Hello World&lt;/info&gt;
   &lt;/tag&gt;
&lt;/taglib&gt;
</pre></blockquote>

<h2>Configuración de la aplicación WEB</h2>
<p>Fichero: <b>/WEB-INF/web.xml</b></p>
<p>Mapeo entre URI de la librería y la ubicación del TLD (Descriptor de la librería de etiquetas).</p>

<blockquote><pre>
  &lt;web-app&gt;
    &lt;taglib&gt;
       &lt;taglib-uri&gt;
         http://jakarta.apache.org/taglibs/utilitytags
       &lt;/taglib-uri&gt;
       &lt;taglib-location&gt;
         /WEB-INF/tld/utilitytags.tld
       &lt;/taglib-location&gt;
    &lt;/taglib&gt;
  &lt;/web-app&gt;
</pre></blockquote>

<h2>Página JSP</h2>
<p>Página JSP que hace uso de la etiqueta personalizada.</p>
<blockquote><pre>
&lt;%@ taglib uri="http://jakarta.apache.org/taglibs/utilitytags" prefix="jLib" %&gt;
&lt;jLib:Hello/&gt;
</pre></blockquote>

</body>
</html>
