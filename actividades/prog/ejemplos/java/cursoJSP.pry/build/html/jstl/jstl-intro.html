<html>
	<head><title>Curso JSP (Java Server Pages)</title></head>
<body bgcolor=#ffffff>
 
        <a href="../jstl.html">JSTL</a> 



<h2>El Lenguaje de Expresión JSTL</h2>
<ul>
<li>JSTL define un Lenguaje de Expresiones (EL).</li>
<li>EL es un lenguaje para acceder a datos de varias fuentes en tiempo de ejecución.</li>
<li>Sintaxis es considerablemente más amigable que la de Java.</li>
<li>EL toma prestada de JavaScript la sintaxis para acceder a datos.</li>
<li>Ejemplos operadores de propiedad y elemento array</li>
<blockquote><pre>
${myObj.myProperty}$
${myObj["myProperty"]}$
${myObj[varWithTheName]}$
${myList[2]}$
${myList[aVar + 1]}$
</pre></blockquote>
<li>Expresión EL debe estar encerrada entre los caracteres ${ y }$.</li>

<li>Operadores aritméticos, relacionales, y lógicos, comprobar si un objeto está "vacío" o no puede ser usado en una expresión EL.</li>
</ul>

<h2>Lista de operadores</h2>
<ul>
<li>. Accede a una propiedad</li>
<li>[] Accede a un elemento de un array/lista</li>
<li>() Agrupa una subexpression</li>
<li>+ Suma</li>
<li>- Resta o negación de un número</li>
<li>/ o div División</li>
<li>% o mod Módulo (resto)</li>
<li>== o eq Comprueba Igualdad</li>
<li>!= o ne Comprueba desigualdad</li>
<li>&lt; o lt Comprueba menor que</li>
<li>&gt; o gt Comprueba mayor que</li>
<li>&lt;= o le Comprueba menor o igual que</li> 
<li>&gt;= o gt Comprueba mayor o igual que</li>
<li>&& o and Comrpueba AND lógico</li>
<li>|| o or Comprueba OR lógico</li>
<li>! o not Complemento binario booleano</li>
<li>empty Comprueba un valor vacío (null, string vacío, o una collección vacía)</li>
</ul>

<li>No encontraremos en EL sentencias como asignaciones, if/else, o while.</li>
<li>Tipo de Literal Descripción: String Encerrado con comillas simples o dobles.</li>
<li>Cualquier objeto en uno de los ámbitos de JSP (página, solicitud, sesión o aplicación) se puede utilizar como una variable en una expresión EL.</li>
</ul>


<h2>Variable Descripción</h2>
<ul>
	<li>param Una collection de todos de los parámetros de la solicitud</li>
	<li>paramValues Una collection de todos los valores de los parámetros de la solicitud</li>
	<li>header Una collection de todas las cabeceras de solicitud</li>
	<li>headerValues Una collection de todos los valores de cabecera de la solicitud</li>
	<li>cookie Una collection con todas las cookies de la solicitud</li>
	<li>initParams Una collection de todos los parámetros de inicialización de la aplicación.</li>
	<li>pageContext Un ejemplar de la clase javax.servlet.jspPageContext. </li>
	<li>pageScope Una collection de todos los objetos en el ámbito de la página.</li>
	<li>requestScope Una collection de todos los objetos en el ámbito de la solicitud.</li>
	<li>sessionScope Una collection de todos los objetos en el ámbito de la sesión.</li>
	<li>applicationScope Una collection de todos los objetos en el ámbito de la aplicación.</li>
</ul>
<li>Ejemplo de cómo acceder a un parámetro de solicitud llamado listType y a la cabecera User-Agent:</li>
<blockquote><pre>
${param.listType}
${header['User-Agent']}
</pre></blockquote>

<li>La variable initParameter proporciona acceso a los parámetros de inicialización que se definen en el fichero web.xml de la aplicación.</li>
<li>La variable pageContext tiene varias propiedades que proporcionan acceso al objeto servlet que representa la solicitud, la respuesta, la sesión y la aplicación, etc. </li>
<li>Las cuatro últimas variables son colecciones que contienen todos los objetos de cada ámbito específico. Podemos usarlas para limitar la búsqueda de un objeto en sólo un ámbito en lugar de buscar en todos ellos, lo que está por defecto si no se especifica ningún ámbito. En otras palabras, si hay un objeto llamado customer en el ámbito de sesión, estas dos primeras expresiones encuentran el mismo objeto, pero la tercera vuelve vacía:</li>

<blockquote><pre>
${customer}
${sessionScope.customer}
${requestScope.customer}
</pre></blockquote>
<li>Las acciones JSTL aceptan expresiones EL como valores de atributo, para todos los atributos excepto para var y scope.</li> 

<blockquote><pre>
First name: &lt;c:out value="${customer.firstName}" /&gt;
&lt;c:out value="First name: ${customer.firstName}" /&gt;
</pre></blockquote>

<li>Todas las acciones JSTL de la librería EL aceptan expresiones EL. Realmente hay un conjunto parelelo de librerías JSTL, llamado conjunto de librería RT. que sólo acepta expresiones Java del viejo estilo: 
<blockquote><pre>
First name: &lt;c_rt:out value="<%= customer.getFirstName() %>" /&gt; 
</pre></blockquote>
</ul>

<h2>Procesamiento Condicional y Bucles</h2>
<ul>
<li>c:if, c:choose, c:when, c:otherwise, y c:forEach.</li> 
<li>&lt;c:if&gt; procesar condicionalmente una parte de una página.</li>
<blockquote><pre>
&lt;c:if test="${!empty cookie.userName}"&gt;
    Welcome back &lt;c:out value="${cookie.userName.value}" /&gt;
&lt;/c:if&gt; 
</pre></blockquote>

<li>El valor del atributo test es una expresión EL que chequea si la cookie existe.</li>
<li>El operador empty combinado con el operador "not" (!) significa que evalúa a true si el cookie no existe, haciendo que el cuerpo del elemento sea procesado.</li>
<li>Dentro del cuerpo, la acción c:out añade el valor de la cookie a la respuesta.</li>

<li>Este fragmento itera sobre una colección de filas de una base de datos con información del tiempo de diferentes ciudades:</li>
<blockquote><pre>
&lt;c:forEach items="${forecasts.rows}" var="${city}"&gt;
   City: &lt;c:out value="${city.name}" /&gt;
   Tomorrow's high: &lt;c:out value="${city.high}" /&gt;
   Tomorrow's low: &lt;c:out value="${city.low}" /&gt;
   &lt;/c:forEach&gt;
</pre></blockquote>


<li>Procesar sólo un conjunto fijo de filas por cada página solicitada, añadamos enlaces "Previous" y "Next" a la misma página. El usuario puede entonces pasar sobre los resultados de la base de datos, mirando unas pocas fila cada vez:</li>

<blockquote><pre>
&lt;c:set var="noOfRows" value="10" /&gt;

&lt;c:forEach items="${forecasts.rows}" var="${city}"
    begin="${param.first}" end="${param.first + noOfRows - 1}"&gt;
    City: &lt;c:out value="${city.name}" /&gt;
    Tomorrow's high: &lt;c:out value="${city.high}" /&gt;
    Tomorrow's low: &lt;c:out value="${city.low}" /&gt;
&lt;/c:forEach&gt;

&lt;c:choose&gt;
  &lt;c:when test="${param.first &gt; 0}"&gt;
	  &lt;a href="foreach.jsp?first=&lt;c:out value="${param.first - noOfRows}"/&gt;"&gt;Previous Page&lt;/a&gt;
  &lt;/c:when&gt;
  &lt;c:otherwise&gt;
     Previous Page
  &lt;/c:otherwise&gt;
&lt;/c:choose&gt;
&lt;c:choose&gt;
  &lt;c:when test="${param.first + noOfRows &lt; forecasts.rowsCount}"&gt;
     &lt;a href="foreach.jsp?first=&lt;c:out value="${param.first + noOfRows}"/&gt;"&gt;Next Page&lt;/a&gt;
  &lt;/c:when&gt;
  &lt;c:otherwise&gt;
     Next Page
  &lt;/c:otherwise&gt;
  &lt;/c:choose&gt;
</pre></blockquote>
</ul>

</body>

</html>
