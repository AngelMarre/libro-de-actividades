<html>
	<head><title>Curso JSP (Java Server Pages)</title></head>
<body bgcolor=#ffffff>
 
		  <a href="../convencionesjsp.html">Ir al inicio</a> | 
		  <a href="introduccion.html">Anterior</a> | 
		  <a href="servlets.html">Siguiente</a></a><br>



<h2>Organización de Ficheros</h2>
<ul>
	<li>Comentarios Iniciales</li>
	<dl><p><dd>Un fichero JSP o un fragmento de fichero empieza con un comentario del lado del servidor: 
<blockquote><pre>&lt;%-- 
  - Author(s):
  - Date:
  - Copyright Notice:
  - @(#)
  - Description: 
  --%&gt;</pre></blockquote>

		<p><dd>La combinación "@(#) " es reconocida por ciertos programas para indicar el inicio de un identificador. Además, esta combinación algunas veces se le añade "$Id$" para que la información de identificación se inserte automáticamente en el JSP por algunas versiones de programas de control.</p> 

		  <p><dd>Comentarios en el lado del cliente (visibles para los navegadores) para propósitos legales y de autenticidad. Esto se puede conseguir dividiendo el bloque de comentarios en dos partes, primero el comentario del lado del cliente: 

<blockquote><pre>&lt;!--
  - Author(s):
  - Date:
  - Copyright Notice:
  --&gt;</pre></blockquote>
		  <p>y luego un breve comentario del lado del servidor: </p>

<blockquote><pre>&lt;%-- 
  - @(#)
  - Description: 
  --%&gt;</pre></blockquote>
</dl></li>
		  
	<li>Directiva(s) JSP Page</li>

	<dl><p><dd>Atributos asociados con la página JSP en tiempo de traducción. La especificación JSP no impone ninguna obligación sobre cuántas directivas page se pueden definir en la misma página. Por eso los dos siguientes fragmentos de código son equivalentes (excepto en que el primero de ello introduce dos líneas en blanco extras en la salida): </p>
			  
<blockquote><pre>
&lt;%@ page session="false" %&gt;
&lt;%@ page import="java.util.*" %&gt;
&lt;%@ page errorPage="/common/errorPage.jsp" %&gt;</pre></blockquote>

<p><dd>Si la longitud de cualquier directiva, como una directiva page, excede de la anchura normal de una página JSP (80 caracteres), se debe dividir en varias líneas: </p>

<%@ page    session="false" 
 import="java.util.*"
 errorPage="/common/errorPage.jsp" 
%>
En general, el segundo ejemplo es la opción preferida para definir la directiva page. Hay una excepción cuando necesitamos importar varios paquetes Java en la página JSP, dejando un atributo import muy largo: 

<%@ page    session="false"
 import="java.util.*,java.text.*,
         com.mycorp.myapp.taglib.*,
         com.mycorp.myapp.sql.*, ..."
...
%>
En este escenario, se prefiere dividir la directiva page de esta forma: 

<%-- all attributes except import ones --%>
<%@ page 
...
%>
<%-- import attributes start here --%>
<%@ page import="java.util.*" %>
<%@ page import="java.text.*" %>
...
Observa que en general las sentencias import siguen las convenciones de codificación Java. Por ejemplo, generalmente se podría aceptar que cuando se utilicen hasta tres clases del mismo paquete, la sentencia import debería especificar las clases individualmente, en vez de su paquete. Si son más de tres clases, es el desarrollador web el que tiene que decidir si listar todas las clases individualmente o utilizar la notación ".*". El primer caso, hace más fácil identificar una clase externa, especialmente cuando intentamos localizar una clase o entender cómo el JSP interactúa con el código Java. Por ejemplo, sin conocer los paquetes Java importados como se muestra abajo, un desarrollador web tendría que buscar en todos esos paquetes para localizar una clase Customer: 

<%@ page import="com.mycorp.bank.savings.*" %>
<%@ page import="com.thirdpartycorp.cashmanagement.*" %>
<%@ page import="com.mycorp.bank.foreignexchange.*" %>
...
En el último caso, es más difícil localizar las clases. En general, si una JSP tiene demasiada sentencias import, es que contiene demasiado código Java. Una mejor opción sería usar más etiquetas JSP. 


		  <li>Directiva(s) Tag Library Opcionales</li>
		  <li>Declaraciones JSP Opcionales</li>
		  <li>Código HTML y JSP</li>
		  <li>Descriptor de Librería de Etiquetas</li>
</ul>



Ficheros JSP / Ficheros de Fragmento JSP
Un fichero JSP consta de las siguientes secciones en este orden: 

Comentarios Iniciales 
Directiva(s) JSP page 
Directiva(s) tag library opcionales 
Declaración(es) JSP opcionales 
Código HTML y JSP 
Comentarios Iniciales


Directiva(s) JSP Page

Directiva(s) Tag Library Opcionales
Una directiva taglib declara las librerías de etiquetas usadas por el JSP. Un directiva corta se declara en una sola línea. Si tenemos varias directivas taglib se deben almacenar juntas en la misma localización dentro del cuerpo JSP: 

<%@ taglib uri="URI1" prefix="tagPrefix1" %>
<%@ taglib uri="URI2" prefix="tagPrefix2" %>
...
Al igual que la directiva page, si la longitud de una directiva taglib excede la anchura de 80 caracteres, debemos dividirla en varias líneas 

<%@ taglib 
    uri="URI2" 
    prefix="tagPrefix2" 
%>
Sólo deberíamos importar librerías de etiquetas que realmente se van a utilizar en la página JSP. 

Desde JSP 1.2, esta altamente recomendado utilizar la JSP Standard Tag Library en nuestra aplicación web para reducir la necesidad de scriptlets JSP en nuestras páginas. Las páginas que usan JSTL son, en general, más fáciles de leer y de mantener. 

Declaraciones JSP Opcionales
Las declaraciones JSP declaran métodos y variables pertenecientes a la JSP. Estos métodos y variables no se diferencian de los declarados en el lenguaje Java, y por lo tanto se deberían seguir las convenciones de codificación más importantes. Es preferible que las declaraciones estén n un sólo bloque de declaración JSP <%! ... %>, para centralizar las declaraciones dentro de un área del cuerpo JSP. Aquí tenemos un ejemplo: 

Bloque de Declaraciones Disparatadas  Bloque de Declaraciones Preferidas  
    <%! private int hitCount; %>
    <%! private Date today; %>
    ...
    <%! public int getHitCount() {
           return hitCount;
        }
    %>
     <%! 
        private int hitCount;
        private Date today; 
    
        public int getHitCount() {
            return hitCount;
        }
    %>
 

Código HTML y JSP
Esta sección contiene el cuerpo HTML del JSP y el propio código JSP, como expresiones JSP, scriptlets e instrucciones Javabeans. 

Descriptor de Librería de Etiquetas
Un descriptor de librería de etiquetas (TLD) debe empezar con la declaración XML apropiada y el sentencia DTD correcta. Por ejemplo, un TLD JSP 1.2 debe empezar con: 

<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE taglib
    PUBLIC "-//Sun Microsystems, Inc.//DTD JSP Tag Library 1.2//EN"
    "http://java.sun.com/dtd/web-jsptaglibrary_1_2.dtd">
Y debe ser inmediatamente seguido por un comentario del lado del servidor que liste el autor, la fecha, el copyright, la información de identificación, y una breve descripción de la librería: 

<!--
  - Author(s):
  - Date:
  - Copyright Notice:
  - @(#)
  - Description:
  -->
Las reglas y guías que rigen el uso de estos elementos son las las mismas que las definidas para los ficheros JSP y los ficheros de fragmentos JSP. 

El resto del fichero de la librería de etiquetas consta de los siguientes elementos y en este orden: 

Declaración opcional de un validador de la librería de etiquetas. 
Declaración opcional de los oyentes de eventos. 
Declaración de una o más etiquetas disponibles. 
Se recomienda que siempre se añadan los siguientes sub-elementos opcionales para los elementos de un TLD. Estos sub-elementos proporcionan espacio para que los diseñadores de etiquetas documenten el comportamiento e información adicional sobre un TLD, y acercarlos a los desarrolladores de componentes web. 

Elemento TLD  Sub-elemento
JSP 1.2 Recomendado  Sub-elemento
JSP 1.1 Recomendado  
attribute (JSP 1.2) description  
init-param (JSP 1.2) description  
tag display-name, description, example name, info 
taglib uri, display-name, description uri, info 
validator (JSP 1.2) description  
variable (JSP 1.2) description  


</body>
</html>
